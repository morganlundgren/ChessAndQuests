@model ChessAndQuests.Models.GameViewModel
@using Microsoft.AspNetCore.Http
@inject IHttpContextAccessor Accessor

<div id="gamekey" 
     data-game-key="@Model.GameKey"
     data-player-id="@Accessor.HttpContext.Session.GetInt32("PlayerId")"
 </div>



@{
    ViewData["Title"] = "Lets play!";
}


@section Styles {
    
    <link rel="stylesheet" href="~/css/chessboard.css" />
    <link rel="stylesheet" href="~/css/PlayGame.css" />
}

<body class="play-game-page">

    <div id="waitingOverlay">
        <div class="waitingBox">
            <h2>Waiting for opponent...</h2>
            <p> Share your game key with a friend!</p>
            <strong>@Model.GameKey</strong>
        </div>
    </div>

<header id="letsplay">Lets play chess!</header>

<header>Lets play chess!</header>

@* Player names *@
<div id="displaynames">
    <div id="playerwhite">
            <strong>White:</strong><span id="playerWhite" data-white-id="@Model.PlayerWhiteId">@Model.PlayerWhiteName</span>
        </div>

    <div id="playerblack">
            <strong>Black:</strong> <span id="playerBlack" data-black-id="@Model.PlayerBlackId">>@Model.PlayerBlackName</span>
    </div>
</div>

<div id="board"></div>

<div id="quests"></div>


</body>

@section Scripts {
    <script src="~/js/chess.js"></script>
    <script src="~/js/chessboard.js"></script>
    <script src="~/js/signalr/dist/browser/signalr.js"></script>
    <script>
        const start_fen = "@Model.CurrentFEN.Trim()";
        const currentPlayerId = @Accessor.HttpContext.Session.GetInt32("PlayerId");
    </script>
    <script src="~/js/Game.js"></script>
}


